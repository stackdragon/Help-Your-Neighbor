{% extends "layout.html" %}
{% block content %}
<h3 class="h3">Account Page for user: {{ acctInfo.username }}</h3>
  <div class="row">
    <div class="col-md-4">
    	.<div class="content-section">
    		<h3>Account Info</h3>
    			<table class="table table-striped table-sm table-responsive-sm">
				  <tbody>
					  	<tr>
					      <th scope="row">First Name:</th>
					      <td>{{acctInfo.firstName}}</td>
					    </tr>
					    <tr>
					      <th scope="row">Last Name:</th>
					      <td>{{acctInfo.lastName}}</td>
					    </tr>
					    <tr>
					      <th scope="row">Street Address:</th>
					      <td>{{acctInfo.userStreet}}</td>
					    </tr>
					    <tr>
					      <th scope="row">City:</th>
					      <td>{{acctInfo.userCity}}</td>
					    </tr>
					    <tr>
					      <th scope="row">State:</th>
					      <td>{{acctInfo.userState}}</td>
					    </tr>
					    <tr>
					      <th scope="row">Zip Code:</th>
					      <td>{{acctInfo.userZip}}</td>
					    </tr>
					    <tr>
					      <th scope="row">Phone Number:</th>
					      <td>{{acctInfo.userPhone}}</td>
					    </tr>	
					    <tr>
					      <th scope="row">Email Address:</th>
					      <td>{{acctInfo.userEmail}}</td>
					    </tr>
					    <tr data-toggle="collapse" data-target="#updateDropdown" class="clickable">
				            <td colspan="2"><button type="button" class="btn btn-sm btn-primary">Update User Info</button></td>
				        </tr>
				        <tr>
				            <td colspan="2">
				                <div id="updateDropdown" class="collapse">
				                	<form method="POST" action ="">
										{{ form.hidden_tag() }} <!-- This function inserts the CSRF security token. Required by WTForms -->

										<fieldset class ="form-group">
											<!-- captures username -->
											<!-- display username entry legend -->
											<div class="form-group">
												{{ form.firstName.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.firstName.errors %}
													{{ form.firstName(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.firstName.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.firstName(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.lastName.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.lastName.errors %}
													{{ form.lastName(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.lastName.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.lastName(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.userStreet.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.userStreet.errors %}
													{{ form.userStreet(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.userStreet.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.userStreet(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.userCity.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.userCity.errors %}
													{{ form.userCity(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.userCity.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.userCity(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.userState.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.userState.errors %}
													{{ form.userState(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.userState.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.userState(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.userZip.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.userZip.errors %}
													{{ form.userZip(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.userZip.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.userZip(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.userPhone.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.userPhone.errors %}
													{{ form.userPhone(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.userPhone.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.userPhone(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<div class="form-group">
												{{ form.userEmail.label(class="form-control-label") }}

												<!-- display error messages if username is entered incorrectly -->
												{% if form.userEmail.errors %}
													{{ form.userEmail(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.userEmail.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>

												<!-- otherwise, display username entry input field -->
												{% else %}
													{{ form.userEmail(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<!-- format is the same for other input entry fields -->
											<div class="form-group">
												{{ form.password.label(class="form-control-label") }}
												{% if form.password.errors %}
													{{ form.password(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.password.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>
												{% else %}
													{{ form.password(class="form-control form-control-lg") }}
												{% endif %}
											</div>

											<!-- format is the same for other input entry fields -->
											<div class ="form-group">
												{{ form.confirm_password.label(class="form-control-label") }}
												{% if form.confirm_password.errors %}
													{{ form.confirm_password(class="form-control form-control-lg is-invalid") }}
													<div class="invalid-feedback">
														{% for error in form.confirm_password.errors %}
															<span> {{ error }} </span>
														{% endfor %}
													</div>
												{% else %}
													{{ form.confirm_password(class="form-control form-control-lg") }}
												{% endif %}
											</div>
										</fieldset>
										<div class="form-group">
											{{ form.submit(class="btn btn-outline-info")}}
										</div>
									</form>
				     			</div>
				            </td>
				        </tr>				    
				  </tbody>
				</table>
    	</div>
    </div>
    <div class="col-md-8">
      	<div class="container">
  			<div class="row">
    			<div class="col-12">
      				<div class="content-section">
      					<h3>Requests You Have Made</h3>
      						<table class="table table-striped table-sm table-responsive-sm">
							  <thead>
							    <tr>
							      <th scope="col">Request ID</th>
							      <th scope="col">Need By</th>
							      <th scope="col">Request Date</th>
							      <th scope="col">Number of Items</th>
							      <th scope="col">Fulfilled?</th>
							      <th scope="col"></th>
							    </tr>
							  </thead>
							  <tbody>
							  	{% for request in requests %}
								  	<tr>
								      <th scope="row">{{request.requestID}}</th>
								      <td>{{request.needByDate}}</td>
								      <td>{{request.requestDate}}</td>
								      <td>{{request.count}}</td>
								      <td>{{request.fulfilled}}</td>
								      <td>
								      	{% if request.fulfilled == False %}
								      		<button type="button" class="btn btn-sm btn-danger">Delete</button>
								      	{% else %}
								      		<button type="button" class="btn btn-sm btn-secondary" disabled>Already Fulfilled</button>
								      	{% endif %}
								      </td>
								    </tr>
							  	{% endfor %}			    
							  </tbody>
							</table>
      				</div>
    			</div>
    			<div class="col-12">
      				<div class="content-section">
      					<h3>Fulfillments You Have Performed</h3>
      						<table class="table table-striped table-sm table-responsive-sm">
							  <thead>
							    <tr>
							      <th scope="col">Fulfillment ID</th>
							      <th scope="col">Fulfillment Date</th>
							      <th scope="col">Details</th>
							    </tr>
							  </thead>
							  <tbody>
							  	{% for fulfillment in fulfillments %}
								  	<tr>
								      <th scope="row">{{fulfillment.fulfillmentID}}</th>
								      <td>{{fulfillment.fulfillDate}}</td>
								      <td>
								      	<button type="button" class="btn btn-sm btn-primary">Click for Info</button>
								      </td>
								    </tr>
							  	{% endfor %}			    
							  </tbody>
							</table>
      				</div>
    			</div>
  			</div>
		</div>
    </div>
  </div>


{% endblock content %}
