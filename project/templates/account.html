{% extends "layout.html" %}
{% block content %}
<h3 class="h3">Account Page for user: {{ userInfo.userName }}</h3><br>
  <div class="row">

    <div class="col-md-4">
    	<div class="content-section">
    		<h3>Account Info</h3>
			<table class="table table-striped table-sm table-responsive-sm">
			  <tbody>
				  	<tr>
				      <th scope="row">First Name:</th>
				      <td>{{userInfo.userFirstName}}</td>
				    </tr>
				    <tr>
				      <th scope="row">Last Name:</th>
				      <td>{{userInfo.userLastName}}</td>
				    </tr>
				    <tr>
				      <th scope="row">Street Address:</th>
				      <td>{{userInfo.userStreetAddress}}</td>
				    </tr>
				    <tr>
				      <th scope="row">City:</th>
				      <td>{{userInfo.userCity}}</td>
				    </tr>
				    <tr>
				      <th scope="row">State:</th>
				      <td>{{userInfo.userState}}</td>
				    </tr>
				    <tr>
				      <th scope="row">Zip Code:</th>
				      <td>{{userInfo.userZip}}</td>
				    </tr>
				    <tr>
				      <th scope="row">Phone Number:</th>
				      <td>{{userInfo.userPhoneNumber}}</td>
				    </tr>	
				    <tr>
				      <th scope="row">Email Address:</th>
				      <td>{{userInfo.userEmail}}</td>
				    </tr>				    
			  </tbody>
			</table>
			<a href="{{url_for('updateUser')}}" class="btn btn-info" role="button">Update Account Info</a>
    	</div>
    </div>
    <div class="col-md-8">
      	<div class="container">
  			<div class="row">
    			<div class="col-12">
      				<div class="content-section">
      					<h3>Requests You Have Made</h3>
      						<table class="table table-striped table-sm table-responsive-sm">
							  <thead>
							    <tr>
							      <th scope="col">Request ID</th>
							      <th scope="col">Need By</th>
							      <th scope="col">Request Date</th>
							      <th scope="col">Number of Items</th>
							      <th scope="col">Details</th>
							    </tr>
							  </thead>
							  <tbody>
							  	{% for request in requests %}
								  	<tr>
								      <th scope="row">{{request.requestID}}</th>
								      <td>{{request.needByDate}}</td>
								      <td>{{request.requestDate}}</td>
								      <td>{{request.count}}</td>
								      <td>
								      	{% if request.fulfilled == False %}
								      		<form action="{{url_for('displayRequest')}}" method="get">
											  	<input type="hidden" name="requestID" value="{{ request.requestID }}">
											  	<input type="submit" value="View" class="btn btn-sm btn-info">
											</form>
								      	{% else %}
								      		<button type="button" class="btn btn-sm btn-secondary" disabled>Already Fulfilled</button>
								      	{% endif %}
								      </td>
								    </tr>
							  	{% endfor %}			    
							  </tbody>
							</table>
      				</div>
    			</div>
    			<div class="col-12">
      				<div class="content-section">
      					<h3>Fulfillments You Have Performed</h3>
      						<table class="table table-striped table-sm table-responsive-sm">
							  <thead>
							    <tr>
							      <th scope="col">Fulfillment ID</th>
							      <th scope="col">Fulfillment Date</th>
							      <th scope="col">Details</th>
							    </tr>
							  </thead>
							  <tbody>
							  	{% for fulfillment in fulfillments %}
								  	<tr>
								      <th scope="row">{{fulfillment.fulfillmentID}}</th>
								      <td>{{fulfillment.transactionDate}}</td>
								      <td>
								      	<form action="{{url_for('displayFulfillment')}}" method="get">
											  	<input type="hidden" name="fulfillmentID" value="{{ fulfillment.fulfillmentID }}">
											  	<input type="submit" value="View" class="btn btn-sm btn-info">
											</form>
								      </td>
								    </tr>
							  	{% endfor %}			    
							  </tbody>
							</table>
      				</div>
    			</div>
  			</div>
		</div>
    </div>
  </div>


{% endblock content %}
